Version 4
SHEET 1 880 680
WIRE 368 -128 240 -128
WIRE 240 -64 240 -128
WIRE 272 -64 240 -64
WIRE 368 -48 368 -128
WIRE 368 -48 336 -48
WIRE 272 -32 0 -32
WIRE -272 0 -272 -16
WIRE 544 0 544 -16
WIRE 192 64 192 48
WIRE 384 64 256 64
WIRE 528 64 528 48
WIRE -272 80 -272 64
WIRE -240 80 -272 80
WIRE 0 80 0 -32
WIRE 0 80 -16 80
WIRE 128 80 0 80
WIRE 496 80 432 80
WIRE 544 80 544 64
WIRE -272 96 -272 80
WIRE 256 96 256 64
WIRE 256 96 224 96
WIRE 272 96 256 96
WIRE 32 112 32 64
WIRE 128 112 32 112
WIRE 384 112 384 64
WIRE 496 112 384 112
WIRE 32 128 32 112
WIRE 256 128 224 128
WIRE 272 128 256 128
WIRE 544 128 544 112
WIRE 128 144 112 144
WIRE 528 144 528 128
WIRE 112 160 112 144
WIRE 256 160 256 128
WIRE 432 160 432 80
WIRE 432 160 256 160
WIRE -272 176 -272 160
WIRE 192 176 192 160
FLAG -80 80 0
FLAG -240 80 0
FLAG 112 160 0
FLAG -272 -16 +5V
FLAG -272 176 -5V
FLAG 192 176 -5V
FLAG 192 48 +5V
FLAG 272 96 OUTN
IOPIN 272 96 Out
FLAG 272 128 OUTP
IOPIN 272 128 Out
FLAG 32 192 0
FLAG 32 0 +5V
FLAG 528 48 +5V
FLAG 528 144 -5V
FLAG 544 128 0
FLAG 544 -16 +5V
FLAG 304 -80 +5V
FLAG 304 -16 -5V
SYMBOL voltage -16 80 R90
WINDOW 0 -112 193 VLeft 2
WINDOW 3 -127 192 VLeft 2
WINDOW 123 -98 194 VLeft 2
WINDOW 39 40 94 Left 2
SYMATTR InstName V1
SYMATTR Value PULSE(-50m 50m 0 0.1n 0.1n {PERIOD/2} {PERIOD})
SYMATTR Value2 AC 1V
SYMBOL voltage -272 0 R0
WINDOW 0 33 25 Left 2
WINDOW 3 32 38 Left 2
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL voltage -272 96 R0
WINDOW 0 33 25 Left 2
WINDOW 3 32 38 Left 2
SYMATTR InstName V3
SYMATTR Value 5
SYMBOL res 32 128 R0
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL res 32 0 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL ADA4950 192 112 R0
SYMATTR InstName U1
SYMBOL cmp-ocg 528 96 R0
WINDOW 0 64 -16 Left 2
WINDOW 38 47 -2 Left 2
SYMATTR InstName U2
SYMATTR SpiceModel LM311
SYMBOL res 544 0 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL opamp-5pin 304 -112 R0
SYMATTR InstName U3
SYMATTR Value OPAx140
TEXT -208 144 Left 2 !.param PERIOD=1ms
TEXT -208 160 Left 2 !.tran {PERIOD*2}
TEXT -208 176 Left 2 !;ac oct 64 10 10G
TEXT -208 128 Left 2 !;.include ADA4950.cir
TEXT -208 240 Left 2 !.meas ac Vref max mag(V(outp,outn)) ; find the peak response and call it "Vref"
TEXT -208 272 Left 2 !;.meas ac BW trig mag(V(outp,outn))=tmp/sqrt(2) rise=1 targ mag(V(outp,outn))=tmp/sqrt(2) fall=last
TEXT -208 288 Left 2 !;.meas ac BW trig 10 targ mag(V(outp,outn)) = tmp/sqrt(2) fall = last
TEXT -208 256 Left 2 !.meas ac BWdif when mag(V(outp,outn)) = Vref/sqrt(2)
TEXT -208 208 Left 2 !.include LM311.cir
TEXT 248 -136 Left 2 !.include opax140.lib
